(this["webpackJsonpxr-vcf-generator"]=this["webpackJsonpxr-vcf-generator"]||[]).push([[0],{74:function(e,n,t){"use strict";t.r(n);var r=t(41),c=t(0),o=t.n(c),a=t(15),i=t.n(a),l=t(5),s=t(7),u={colors:{main:"white",tableContent:"black",title2:"#222",highlight:"green",background:"#222",background2:"#555",backgroundButton:"#777",error:"#ffa0a0",scroll:"green",scrollBg:"black"},fontSizes:{desktop:16,mobile:12},dimensions:{thresholdMobile:720},fonts:{titles:"fucxed",default:"Crimson"}},d=t(2),b=function(e){var n=e.title,t=e.children,r=e.className,c=void 0===r?"":r;return Object(d.jsxs)("div",{className:c,children:[Object(d.jsx)("h2",{children:n}),Object(d.jsx)(j,{children:t})]})},j=l.b.div.withConfig({displayName:"AppPanel__Container",componentId:"sc-11rvjy-0"})([""]),f=Object(l.b)(o.a.memo(b)).withConfig({displayName:"AppPanel",componentId:"sc-11rvjy-1"})(["padding:0.5em;margin:0.5em;background-color:",";h2{margin-bottom:0.5em;}"],u.colors.background2),p=t(10),h=t(27),m=t(28),O=t(30),v=t(31),g=t(78),x=t(44),w=t.n(x),y=function(e){Object(m.a)(t,e);var n=Object(O.a)(t);function t(){return Object(h.a)(this,t),n.apply(this,arguments)}return t}(Object(v.a)(Error)),N="NO_GROUPING",C=t(35),k=t(45),_=t.n(k),I=["t\xe9l\xe9phone","telephone","phone","phone number","num\xe9ro de t\xe9l\xe9phone"],P=["pseudo"],F=["firstName","workPhone","email","note"],D=["firstName","workPhone"],S={workPhone:"t\xe9l\xe9phone",firstName:"nom"},T=function(e,n,t){var r,c=e.map((function(e){return e.toLowerCase()})),o=null,a=Object(C.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,l=c.indexOf(i);if(-1!==l){o=e[l];break}}}catch(s){a.e(s)}finally{a.f()}return o||t},A=function(e){return{firstName:T(e,P,e[0]||null),workPhone:T(e,I,e[1]||null),email:null,note:null}},E=function(e){return e.rawData.data},B=function(e){if(!e.rawData.data)throw new Error("expected data not null");return e.rawData.data},V=function(e){return e.rawData.errors},z=function(e){var n=B(e);return n.length?Object.keys(n[0]):[]},M=function(e){return e.vcfFieldMapping},R=function(e){var n=B(e),t=M(e),r=L(e),c=U(e),o=new Set;null!==c?n.forEach((function(e){o.add(e[c])})):o.add(N);var a={};return o.forEach((function(e){var o=[],i=[];(c?n.filter((function(n){return n[c]===e})):n).forEach((function(e){var n={},c=null;F.forEach((function(o){var a=t[o];if(a){var i=e[a];if("firstName"===o&&(i="".concat(r).concat(i)),"workPhone"===o)try{i=function(e){if(!w()(e))throw new y('Phone number should be a string "'.concat(e,'"'));var n=Object(g.a)(e,"FR");if(n&&n.isValid())return n.number;throw new y('Invalid phone number "'.concat(e,'"'))}(i)}catch(l){if(!(l instanceof y))throw l;c=l}n[o]=i}})),c?i.push(c):o.push(n)})),a[e]={vcfContacts:o,errors:i}})),a},L=function(e){return e.outputOptions.prefix},U=function(e){return e.outputOptions.groupByField},G=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.c)(R),c=Object.entries(r).map((function(e){var n=Object(p.a)(e,2),r=n[0],c=n[1],o=c.vcfContacts,a=(c.errors,r===N?"contacts.vcf":"".concat(r.length?r:"GROUPE-SANS-NOM",".vcf"));return Object(d.jsx)("div",{className:t,children:Object(d.jsxs)("button",{onClick:function(){var e=function(e){var n,t=[],r=Object(C.a)(e);try{var c=function(){var e=n.value,r=_()();Object.entries(e).forEach((function(e){var n=Object(p.a)(e,2),t=n[0],c=n[1];return r[t]=c})),t.push(r.getFormattedString())};for(r.s();!(n=r.n()).done;)c()}catch(o){r.e(o)}finally{r.f()}return t.join("\n")}(o);!function(e,n,t){var r=new Blob([n],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{var c=window.document.createElement("a");c.href=window.URL.createObjectURL(r),c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)}}(a,e,"text/vcard")},children:['T\xe9l\xe9charger "',a,'"']})})}));return Object(d.jsx)(q,{children:c})},q=l.b.div.withConfig({displayName:"DownloadVcfFile__Container",componentId:"sc-1j4z49f-0"})([""]),J=Object(l.b)(o.a.memo(G)).withConfig({displayName:"DownloadVcfFile",componentId:"sc-1j4z49f-1"})([""]),W=t(9),X=t(50),H="RAW_DATA_LOAD_LOCAL",Y="RAW_DATA_LOAD_COMPLETE",K=function(e){return{type:Y,payload:e}},Q={data:null,errors:[]};var Z=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.b)(),o=Object(c.useCallback)((function(e){var n=Object(p.a)(e,1)[0];r(function(e){return{type:H,payload:e}}(n))}),[r]),a=Object(X.a)({onDrop:o}),i=a.getRootProps,l=a.getInputProps,u=a.isDragActive;return Object(d.jsxs)("div",Object(W.a)(Object(W.a)({},i()),{},{className:t,children:[Object(d.jsx)("input",Object(W.a)(Object(W.a)({},l()),{},{multiple:!1})),u?Object(d.jsx)("p",{children:"Drop le fichier ici ..."}):Object(d.jsx)("p",{children:"Drag n drop un fichier CSV ici, ou clique pour s\xe9lectionner"})]}))},$=Object(l.b)(o.a.memo(Z)).withConfig({displayName:"DragDropFile",componentId:"sc-1hmw77n-0"})([""]),ee=t(51),ne="OUTPUT_OPTIONS_SET_PREFIX",te="OUTPUT_OPTIONS_SET_GROUP_BY_FIELD",re={prefix:"XR ACTION ",groupByField:null};var ce=function(e){return{value:e,label:e}},oe=t(49),ae=Object(l.b)(oe.a).withConfig({displayName:"StyledSelect",componentId:"sc-1l8ioyy-0"})([".react-select__control{background-color:",";border-color:",";.react-select__single-value{color:",";}}"],u.colors.backgroundButton,u.colors.main,u.colors.main),ie={value:null,label:"D\xc9SACTIV\xc9"},le=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.b)(),c=Object(s.c)(L),o=Object(s.c)(U),a=Object(s.c)(z),i=[ie].concat(Object(ee.a)(a.map(ce)));return Object(d.jsxs)("div",{className:t,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"outputOptionsPrefix",children:"Prefix"}),Object(d.jsx)("input",{type:"text",name:"outputOptionsPrefix",id:"outputOptionsPrefix",value:c,onChange:function(e){return r(function(e){return{type:ne,payload:e}}(e.currentTarget.value))}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"groupByField",children:"Grouper par champ"}),Object(d.jsx)(ae,{id:"outputOptionsGroupByField",classNamePrefix:"react-select",options:i,value:o?ce(o):ie,onChange:function(e){return r((n=e.value,{type:te,payload:n}));var n}})]})]})},se=Object(l.b)(o.a.memo(le)).withConfig({displayName:"OutputOptions",componentId:"sc-5mro5f-0"})(["input{margin-left:1em;}"]),ue=function(e){var n=e.errors,t=e.className,r=void 0===t?"":t,c=null;return n.length&&(c=Object(d.jsxs)("div",{children:["Il y a ",n.length," erreur(s) dans le fichier :"]})),Object(d.jsxs)("div",{className:r,children:[c,n.map((function(e,n){return Object(d.jsx)("div",{children:e.message},n)}))]})},de=Object(l.b)(o.a.memo(ue)).withConfig({displayName:"DataTableErrors",componentId:"sc-1plj3q4-0"})(["& > div{color:",";}"],u.colors.error),be=function(e){var n=e.headers,t=e.className,r=void 0===t?"":t;return Object(d.jsx)("tr",{className:r,children:n.map((function(e){return Object(d.jsx)("th",{children:e},e)}))})},je=Object(l.b)(o.a.memo(be)).withConfig({displayName:"DataTableHeaders",componentId:"sc-1r4wjmp-0"})(["th{text-align:left;}"]),fe=function(e){var n=e.datum,t=e.headers,r=e.className,c=void 0===r?"":r;return Object(d.jsx)("tr",{className:c,children:t.map((function(e){return Object(d.jsx)("td",{children:n[e]},e)}))})},pe=Object(l.b)(o.a.memo(fe)).withConfig({displayName:"DataTableRow",componentId:"i5eahh-0"})([""]),he=function(e){var n=e.data,t=e.headers,r=e.headersDisplayMapping,c=e.errors,o=e.className,a=void 0===o?"":o,i=r?t.map((function(e){return r[e]||e})):t;return Object(d.jsxs)("div",{className:a,children:[Object(d.jsx)(me,{children:Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsx)(je,{headers:i})}),Object(d.jsx)("tbody",{children:n.map((function(e,n){return Object(d.jsx)(pe,{datum:e,headers:t},n)}))})]})}),Object(d.jsx)(de,{errors:c})]})},me=l.b.div.withConfig({displayName:"DataTable__DataTableContainer",componentId:"tlajz3-0"})([""]),Oe=Object(l.b)(o.a.memo(he)).withConfig({displayName:"DataTable",componentId:"tlajz3-1"})(["color:",";","{position:relative;max-height:10em;overflow:auto;table{width:100%;}}"],u.colors.tableContent,me),ve=function(e){e.className;var n=Object(s.c)(B),t=Object(s.c)(z),r=Object(s.c)(V);return n?Object(d.jsx)(Oe,{data:n,headers:t,errors:r}):null},ge=Object(l.b)(o.a.memo(ve)).withConfig({displayName:"RawDataView",componentId:"sc-1by3vhf-0"})([""]),xe=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.c)(R),c=Object(s.c)(M),o=Object.entries(c).filter((function(e){var n=Object(p.a)(e,2);n[0];return null!==n[1]})).map((function(e){return Object(p.a)(e,1)[0]}));return Object(d.jsx)(we,{children:Object.entries(r).map((function(e){var n=Object(p.a)(e,2),r=n[0],c=n[1],a=c.vcfContacts,i=c.errors;return Object(d.jsxs)(ye,{children:[r!==N?Object(d.jsx)("h3",{children:r.length?r:"GROUPE SANS NOM"}):null,Object(d.jsx)(Oe,{className:t,data:a,headers:o,headersDisplayMapping:S,errors:i})]})}))})},we=l.b.div.withConfig({displayName:"VcfContactsView__Container",componentId:"z2q8fg-0"})([""]),ye=l.b.div.withConfig({displayName:"VcfContactsView__GroupContainer",componentId:"z2q8fg-1"})(["margin:1rem 0;"]),Ne=Object(l.b)(o.a.memo(xe)).withConfig({displayName:"VcfContactsView",componentId:"z2q8fg-2"})([""]),Ce=t(16),ke="VCF_FIELD_MAPPING_SET",_e=function(e){return{type:ke,payload:e}},Ie={firstName:null,workPhone:null,email:null,note:null};var Pe=function(e){return{value:e,label:e}},Fe=function(e){var n=e.vcfFieldMapping,t=e.className,r=void 0===t?"":t,o=Object(s.b)(),a=Object(c.useState)(!1),i=Object(p.a)(a,2),l=i[0],u=i[1],b=Object(c.useState)(null),j=Object(p.a)(b,2),f=j[0],h=j[1],m=F.filter((function(e){return!D.includes(e)})).filter((function(e){return null===n[e]})).map(Pe);return Object(d.jsxs)("div",{className:r,children:[Object(d.jsx)("button",{onClick:function(){h(null),u(!l)},children:l?"\u2715":"Ajouter champ"}),l?Object(d.jsx)(ae,{options:m,onChange:function(e){return h(e.value)},value:f?Pe(f):null,classNamePrefix:"react-select"}):null,l?Object(d.jsx)("button",{disabled:null===f,onClick:function(){f&&(o(_e(Object(Ce.a)({},f,""))),h(null),u(!1))},children:"Ok"}):null]})},De=Object(l.b)(o.a.memo(Fe)).withConfig({displayName:"AddOptionalVcfField",componentId:"sc-1byo1qc-0"})(["display:flex;","{width:60%;}"],ae),Se=function(e){var n=e.choices,t=e.vcfFieldName,r=e.selected,c=e.className,o=void 0===c?"":c,a=D.includes(t),i=Object(s.b)(),l=n.map(ce),u=S[t]||t;return Object(d.jsxs)("div",{className:o,children:[Object(d.jsx)(Te,{children:u}),Object(d.jsx)(Ae,{children:"\u2192"}),Object(d.jsx)(ae,{classNamePrefix:"react-select",options:l,value:r?ce(r):null,onChange:function(e){return i(_e(Object(Ce.a)({},t,e.value)))}}),a?null:Object(d.jsx)("button",{onClick:function(){return i(_e(Object(Ce.a)({},t,null)))},children:"\u2715"})]})},Te=l.b.span.withConfig({displayName:"FieldPicker__VcfFieldNameContainer",componentId:"sc-137ohkn-0"})([""]),Ae=l.b.span.withConfig({displayName:"FieldPicker__ArrowContainer",componentId:"sc-137ohkn-1"})([""]),Ee=Object(l.b)(o.a.memo(Se)).withConfig({displayName:"FieldPicker",componentId:"sc-137ohkn-2"})(["display:flex;justify-content:space-between;align-items:center;","{width:30%;}","{font-size:200%;}","{width:60%;}"],Te,Ae,ae),Be=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.c)(z),c=Object(s.c)(M);return Object(d.jsxs)("div",{className:t,children:[F.map((function(e){return null!==c[e]?Object(d.jsx)(Ee,{vcfFieldName:e,choices:r,selected:c[e]},e):null})),Object(d.jsx)(De,{vcfFieldMapping:c})]})},Ve=Object(l.b)(o.a.memo(Be)).withConfig({displayName:"VcfFieldMapper",componentId:"sc-1vhsuq0-0"})(["","{margin-bottom:0.5em;}"],Ee),ze=function(e){var n=e.className,t=void 0===n?"":n,r=Object(s.c)(E);return Object(d.jsxs)("div",{className:t,children:[Object(d.jsx)("h1",{children:"G\xe9n\xe9rateur de fichier de contacts"}),Object(d.jsx)(f,{title:"1. Upload un fichier CSV",children:Object(d.jsx)($,{})}),r?Object(d.jsx)(f,{title:"2. Aper\xe7u des donn\xe9es brutes",children:Object(d.jsx)(ge,{})}):null,r?Object(d.jsx)(f,{title:"3. Selection des champs \xe0 exporter",children:Object(d.jsx)(Ve,{})}):null,r?Object(d.jsx)(f,{title:"4. Options",children:Object(d.jsx)(se,{})}):null,r?Object(d.jsx)(f,{title:"5. Aper\xe7u des contacts export\xe9s",children:Object(d.jsx)(Ne,{})}):null,r?Object(d.jsx)(f,{title:"6. Export",children:Object(d.jsx)(J,{})}):null]})},Me=Object(l.b)(o.a.memo(ze)).withConfig({displayName:"App",componentId:"sc-1275v06-0"})(["height:100%;overflow:auto;max-width:1000px;margin:auto;"]),Re=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,79)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),o(e),a(e)}))},Le=t(17),Ue=t(13),Ge=t.n(Ue),qe=t(18),Je=t(47),We=t(48),Xe=t.n(We),He=function(e){Object(m.a)(t,e);var n=Object(O.a)(t);function t(){return Object(h.a)(this,t),n.apply(this,arguments)}return t}(Object(v.a)(Error)),Ye=function(e,n){var t="";return t=n[e.row]?"line ".concat(e.row," (").concat(e.message,") : ").concat(Object.values(n[e.row]).join(", ")):"line ".concat(e.row," ").concat(e.message),new He(t)},Ke=function(){var e=Object(Je.a)(Ge.a.mark((function e(n){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){Xe.a.parse(n,{header:!0,skipEmptyLines:!0,complete:function(n){var t=n.data,r=[];if(n.errors.length){var c=n.errors.map((function(e){return e.row}));t=t.filter((function(e,n){return!c.includes(n)})),r=n.errors.map((function(e){return Ye(e,n.data)}))}e({data:t,errors:r})}})})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Qe=Ge.a.mark(en),Ze=Ge.a.mark(nn),$e=Ge.a.mark(tn);function en(e){var n,t;return Ge.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(qe.b)(Ke,e.payload);case 2:return n=r.sent,r.next=5,Object(qe.c)(K(n));case 5:return r.next=7,Object(qe.d)(z);case 7:return t=r.sent,r.next=10,Object(qe.c)(_e(A(t)));case 10:case"end":return r.stop()}}),Qe)}function nn(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.e)(H,en);case 2:case"end":return e.stop()}}),Ze)}function tn(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.a)([nn()]);case 2:case"end":return e.stop()}}),$e)}var rn=t(52),cn=Object(Le.b)({rawData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case H:return Object(W.a)(Object(W.a)({},e),{},{data:null,errors:[]});case Y:return Object(W.a)(Object(W.a)({},e),{},{data:n.payload.data,errors:n.payload.errors});default:return e}},vcfFieldMapping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ke:return Object(W.a)(Object(W.a)({},e),n.payload);default:return e}},outputOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ne:return Object(W.a)(Object(W.a)({},e),{},{prefix:n.payload});case te:return Object(W.a)(Object(W.a)({},e),{},{groupByField:n.payload});default:return e}}}),on=Object(rn.a)(),an=[Object(Le.a)(on)];var ln,sn=Object(Le.d)(cn,{},Le.c.apply(void 0,an));on.run(tn);var un=Object(l.a)(ln||(ln=Object(r.a)(["\n    * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n    }\n\n    button {\n        cursor: pointer;\n    }\n\n    a {\n        text-decoration: none;\n    }\n\n    body {\n        overflow: hidden;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-size: 16px;\n    }\n\n    html,\n    body,\n    #root {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n\n    body {\n        color: ",";\n        background-color: ",";\n        font-size: ","px;\n        @media (max-width: ","px) {\n            font-size: ","px;\n        }\n        font-family: ",";\n    }\n\n    *::-webkit-scrollbar {\n        width: 0.5em;\n        height: 0.5em;\n    }\n       \n    *::-webkit-scrollbar-thumb {\n        background-color: ",";\n        outline: 1px solid ",";\n    }\n\n    * {\n        scrollbar-color: "," ",";\n        scrollbar-width: thin;\n    }\n\n    button, input {\n        border:  1px "," solid;\n        border-radius: 0.3em;\n        font-family: ",";\n        color: ",";\n        padding: 0.5em;\n    }\n\n    button {\n        background-color: ",";\n    }\n\n    input {\n        background-color: transparent;\n    }\n\n    h1, h2 {\n        font-family: ",";\n    }\n\n    h2 {\n        color: ",";\n    }\n\n    /* TODO : Move from here */\n    .react-select__menu-list {\n        background-color: ",";\n        .react-select__option {\n            background-color: ",";\n            cursor: pointer;\n            &.react-select__option--is-focused {\n                background-color: ",";\n            }\n        }\n    }\n"])),u.colors.main,u.colors.background,u.fontSizes.desktop,u.dimensions.thresholdMobile,u.fontSizes.mobile,u.fonts.default,u.colors.scrollBg,u.colors.scrollBg,u.colors.scroll,u.colors.scrollBg,u.colors.main,u.fonts.default,u.colors.main,u.colors.backgroundButton,u.fonts.titles,u.colors.title2,u.colors.background2,u.colors.background2,u.colors.highlight);i.a.render(Object(d.jsxs)(o.a.StrictMode,{children:[Object(d.jsx)(un,{}),Object(d.jsx)(s.a,{store:sn,children:Object(d.jsx)(Me,{})})]}),document.getElementById("root")),Re()}},[[74,1,2]]]);
//# sourceMappingURL=main.ab09bdd7.chunk.js.map